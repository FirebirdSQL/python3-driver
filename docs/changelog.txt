#########
Changelog
#########

Version 1.3.1
=============

* Fix unregistered bug: wrong handling of Firebird 4 string info parameters.

Version 1.3.0
=============

* Fix (#4): exeption returns non ascii-127 symbols.
  The error message decode uses `.fbapi.err_encoding` value that is initialized to
  `locale.getpreferredencoding`. Also, the decode is now done with `errors="replace"`.
* Fix unregistered bug: wrong handling of milliseconds in TIME and TEMEPSTAMP datatype.
* Sync _VERSION_ value with package version
* Fix unregistered bug: Do not raise exception if accessed `.Statement.plan` is `None`.
* Fix unregistered bug: `.get_statistics()` does not send `tables` correctly.
* Fix annotations.
* `.ServerTraceServices` methods now have return values.
* User name added to `.TraceSession`.
* Fix unregistered bug: `auth_plugin_list` configuration option is ignored
* All methods of `.ServerDbServices3` except 3 related to limbo transactions have new
  optional keyword-only parameter `role` that is passed to called utility.
* Function `.connect_server()` has new optional keyword-only parameter `expected_db`,
  to access services with non-default security database.

* Improved Firebird 4 support.

  - Version-specific classes introduced. Internal classes `.DatabaseInfoProvider`,
    `.TransactionInfoProvider` and `.ServerDbServices` now implement only Firebird 4 features
    and descend from Firebird 3 versions. The proper variant is returned according to
    connected server.
  - New `.DatabaseConfig` options `session_time_zone`, `set_bind`, `decfloat_round` and
    `decfloat_traps`.
  - New `.DPB` parameters `session_time_zone`, `set_db_replica`, `set_bind`, `decfloat_round`
    and `decfloat_traps`.
  - New `session_time_zone` keyword parameter for `.connect()`.
  - Added explicit support for READ COMMITTED READ CONSISTENCY isolation (when disabled in
    Firebird configuration).
  - Support for transactions started at specified snapshot number.
    New `.TransactionInfoProvider.snapshot_number` property.
    The `.TPB` has new `at_snapshot_number` parameter.
  - `.backup()` and `.local_backup()` have new optional keyword-only arguments
    `include_data`, `keyhoder`, `keyname` and `crypt`, and `ZIP` value was added to `SrvBackupFlag`.
  - `.restore()` and `.local_restore()` have new optional keyword-only
    arguments `include_data`, `keyhoder`, `keyname`, `crypt` and `replica_mode`.
  - `.nbackup()` has new optional keyword-only parameter `guid`.
  - Support for new services.
    New methods `.ServerDbServices.nfix_database()` and `.set_replica_mode()`.
  - Support for `.Statement.timeout`, and `idle_timeout` and `statement_timeout` in `.Connection.info`.
  - New types: `.Features`, `.ReplicaMode`, `.CancelType`, `.DecfloatRound`, `.DecfloatTraps`,
    `.ConnectionFlag` and `.EncryptionFlag`. Firebird 4-related values added to some other
    enum types.

Version 1.2.1
=============

* Fixed dependency to `firebird-base` (v1.3.0)

Version 1.2.0
=============

* Fix unregistered bug: `sql_dialect` is used instead `db_sql_dialect` in `.create_database`.
* Fix (#2): error when handling input parameters with value None
* Added `.Server.mode` attribute to allow fetching service output using LINE or TO_EOF method.
  Default mode is TO_EOF.

Version 1.1.0
=============

* Important: Support for Firebird 4 TIMEZONE is broken (for FB4 RC1). It will be fixed in
  next driver version.
* Build scheme changed to `PEP 517`.
* Various changes to documentation and type hint adjustments.
* Changed: `.DriverConfig.db_defaults` and `.DriverConfig.server_defaults` are now created
  as `optional` (introduced by firebird-base 1.2.0), so configuration file does not require
  `firebird.db.defaults` and `firebird.server.defaults` sections (even empty).
* Fix: unregistered bug in `InfoProvider`.
* Fix: unregistered bug in `FirebirdAPI` initialization.

Version 1.0.0
=============

* Added support for schema and monitor modules from `firebird-lib`_ package.
* Documentation: adjustments to css.

Version 0.8.0
=============

The driver is no longer *beta*, and is now considered as **stable** for Firebird 3.0 (support for Firebird 4 is still evolving till final release).

* Documentation, both in code and separate (especially Usage Guide).
* Added support for new FB4 data types in ARRAY fields.
* Refactoring in driver hooks.
* New `.Cursor.call_procedure()` method.
* Refactoring and fixes in Server and its services.

Version 0.7.0
=============

* Added support for new FB4 data types (TIME/TIMESTAMP WITH TIMEZONE, DECFLOAT[16|34] and
  extended DECIMAL/NUMERIC via INT128 storage).

Version 0.6.0
=============

* More documentation.
* Initial support for Firebird 4+ (interfaces and other definitions). Includes support for
  interface versions.
* `Service` renamed to `Server`. Selected functionality moved to inner objects (relates to
  FB4+ support).
* New module: `~firebird.driver.config` - Driver configuration
* New module: `~firebird.driver.interfaces` - Interface wrappers for Firebird new API
* Changed module: `~firebird.driver.types`

  - Interface wrapper moved to separate module
  - Buffer managers moved to `~firebird.driver.core` module
* Changed module: `~firebird.driver.core`

  - `connect()`, `create_database()` and `connect_server()` now use driver configuration.
  - Simplified/unified transaction isolation specification.
  - Emit warnings when objects with allocated Firebird resources are disposed (by Python
    GC) without prior call to `close()`.
  - Trace instrumentation removed. Use dynamic trace configuration from firebird-base 0.6.0.
  - `Connection` and `Transaction` information moved to inner objects accessible via `info`
    properties (relates to FB4+ support).

Version 0.5.0
=============

Initial release.

.. _firebird-lib: https://pypi.org/project/firebird-lib/
